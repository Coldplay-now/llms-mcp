llms.txt ä»‹ç»
1
2
llms.txt æ˜¯ä¸€ç§æ–°å…´çš„æ–‡ä»¶æ ‡å‡†ï¼Œæ—¨åœ¨ä¸ºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æä¾›ä¼˜åŒ–çš„å†…å®¹ç»“æ„ï¼Œå¸®åŠ© AI æ›´é«˜æ•ˆåœ°ç†è§£å’Œå¤„ç†ç½‘ç«™ä¿¡æ¯ã€‚å®ƒé€šè¿‡ç²¾ç®€å’Œç»“æ„åŒ–çš„æ–¹å¼ï¼Œå°†ç½‘ç«™çš„æ ¸å¿ƒå†…å®¹æç‚¼ä¸º Markdown æ ¼å¼ï¼Œå»é™¤å¯¼èˆªèœå•ã€å¹¿å‘Šå’Œå¤æ‚è„šæœ¬ç­‰å¹²æ‰°é¡¹ï¼Œä»è€Œæå‡ AI çš„è§£ææ•ˆç‡ã€‚

llms.txt çš„æ ¸å¿ƒåŠŸèƒ½

llms.txt æ–‡ä»¶ä¸»è¦åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š

/llms.txtï¼šæä¾›ç½‘ç«™å†…å®¹çš„é«˜å±‚æ¬¡æ¦‚è§ˆï¼Œå¸®åŠ© AI å¿«é€ŸæŒæ¡ç½‘ç«™ç»“æ„å’Œå…³é”®èµ„æºã€‚

/llms-full.txtï¼ˆå¯é€‰ï¼‰ï¼šåŒ…å«å®Œæ•´çš„æ–‡æ¡£å†…å®¹ï¼Œé€‚ç”¨äºéœ€è¦æ·±å…¥äº†è§£çš„åœºæ™¯ï¼Œå¦‚æŠ€æœ¯æ–‡æ¡£æˆ– API å‚è€ƒã€‚

æ–‡ä»¶æ ¼å¼é‡‡ç”¨ Markdown ç»“æ„ï¼ŒåŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š

ä¸€ä¸ª H1 æ ‡é¢˜ï¼Œæ ‡æ˜é¡¹ç›®æˆ–ç½‘ç«™åç§°ã€‚

ç®€çŸ­çš„é¡¹ç›®æ‘˜è¦ï¼Œå¸®åŠ© AI ç†è§£æ–‡ä»¶å†…å®¹ã€‚

ä»¥ H2 æ ‡é¢˜åˆ†éš”çš„éƒ¨åˆ†ï¼Œåˆ—å‡ºå…³é”®èµ„æºçš„é“¾æ¥åŠç®€è¦è¯´æ˜ã€‚

ç¤ºä¾‹æ ¼å¼å¦‚ä¸‹ï¼š

# ç¤ºä¾‹é¡¹ç›®
> ä¸€ä¸ªç”¨æ¥æ¼”ç¤º llms.txt åŠŸèƒ½çš„ç®€å•é¡¹ç›®ã€‚

## æ ¸å¿ƒæ–‡æ¡£
- [å¿«é€Ÿå…¥é—¨](https://example.com/quickstart "å¿«é€Ÿå…¥é—¨")ï¼šæ•™ä½ æ€ä¹ˆå¿«é€Ÿç”¨èµ·æ¥ã€‚
- [API æ–‡æ¡£](https://example.com/api "API æ–‡æ¡£")ï¼šæ‰€æœ‰ API çš„è¯¦ç»†è¯´æ˜ã€‚

## ç¤ºä¾‹ä»£ç 
- [GitHub ä»“åº“](https://github.com/example/repo "GitHub ä»“åº“")ï¼šå®Œæ•´çš„ä»£ç éƒ½åœ¨è¿™å„¿ã€‚

## è”ç³»æ–¹å¼
- https://example.com/contact
å¤åˆ¶
llms.txt çš„ä¼˜åŠ¿

ä¼˜åŒ– AI ç†è§£ï¼šé€šè¿‡ç»“æ„åŒ–å†…å®¹ï¼Œå¸®åŠ© LLM å¿«é€ŸæŠ“ä½é‡ç‚¹ï¼Œé¿å…è¢«é¡µé¢æ ·å¼å¹²æ‰°ã€‚

æå‡æ•ˆç‡ï¼šç²¾ç®€çš„å†…å®¹æ ¼å¼å‡å°‘äº†ä¸Šä¸‹æ–‡çª—å£çš„å ç”¨ï¼Œä½¿ AI èƒ½æ›´é«˜æ•ˆåœ°å¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚

åŒé‡å¯è¯»æ€§ï¼šMarkdown æ ¼å¼æ—¢é€‚åˆäººç±»é˜…è¯»ï¼Œä¹Ÿä¾¿äºæœºå™¨è§£æã€‚

è¡¥å……ç°æœ‰æ ‡å‡†ï¼šä¸ robots.txt å’Œ sitemap.xml ä¸åŒï¼Œllms.txt ä¸“æ³¨äºä¸º AI æä¾›å†…å®¹æ¦‚è¦ï¼Œè€Œéçˆ¬å–æƒé™æˆ–é¡µé¢ç´¢å¼•ã€‚

åº”ç”¨åœºæ™¯

llms.txt ä¸»è¦ç”¨äºä»¥ä¸‹é¢†åŸŸï¼š

æŠ€æœ¯æ–‡æ¡£ï¼šå¦‚ç¼–ç¨‹æŒ‡å—ã€API å‚è€ƒç­‰ï¼Œå¸®åŠ© AI æ›´å¿«å›ç­”å¼€å‘è€…é—®é¢˜ã€‚

ç”µå•†ä¸æ•™è‚²ï¼šä¼˜åŒ–äº§å“ä»‹ç»å’Œè¯¾ç¨‹èµ„æ–™çš„å‘ˆç°æ–¹å¼ã€‚

ä¸ªäººåšå®¢ï¼šæå‡å†…å®¹æ¸…æ™°åº¦ï¼Œä¾¿äº AI ç†è§£ã€‚

å·¥å…·æ”¯æŒ

ç›®å‰å·²æœ‰å¤šç§å·¥å…·æ”¯æŒè‡ªåŠ¨ç”Ÿæˆ llms.txt æ–‡ä»¶ï¼š

Mintlifyï¼šä¸ºæ‰˜ç®¡æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ llms.txt å’Œ llms-full.txt æ–‡ä»¶ã€‚

Firecrawlï¼šé€šè¿‡çˆ¬å–ç½‘ç«™å†…å®¹ç”Ÿæˆç¬¦åˆæ ‡å‡†çš„ llms.txt æ–‡ä»¶ã€‚

SiteSpeakAIï¼šåœ¨çº¿å·¥å…·ï¼Œè¾“å…¥åŸŸåå³å¯ç”Ÿæˆæ–‡ä»¶ã€‚

æœªæ¥å‘å±•

llms.txt æä¾›äº†ä¸€ç§æ ‡å‡†åŒ–æ–¹æ³•ï¼Œè®© AI æ›´é«˜æ•ˆåœ°ä¸ç½‘ç«™å†…å®¹äº’åŠ¨ã€‚å°½ç®¡ç›®å‰ä»å¤„äºæ—©æœŸé˜¶æ®µï¼Œä½†å…¶æ½œåŠ›å·¨å¤§ï¼Œå°¤å…¶åœ¨æŠ€æœ¯æ–‡æ¡£å’Œ API åœºæ™¯ä¸­è¡¨ç°çªå‡ºã€‚æœªæ¥ï¼Œéšç€æ›´å¤šå¼€å‘è€…å’Œå¹³å°çš„é‡‡ç”¨ï¼Œllms.txt æœ‰æœ›æˆä¸º AI ä¼˜åŒ–å†…å®¹å‘ˆç°çš„ä¸»æµæ ‡å‡†ã€‚



ç³»ç»Ÿæ¶æ„æ¦‚è¿°

è¿™ä¸ªMCP Serveré‡‡ç”¨stdioä¼ è¾“æœºåˆ¶ï¼Œæ•´ä½“æ¶æ„åŒ…å«ä¸‰ä¸ªä¸»è¦ç»„ä»¶ï¼šå®¢æˆ·ç«¯(IDE/AIåŠ©æ‰‹) â†’ MCPä¼ è¾“å±‚(stdio) â†’ LLMS.txtç”ŸæˆæœåŠ¡ã€‚

ğŸ”§ é™æ€æ‹“æ‰‘å›¾

graph TB
    %% å®¢æˆ·ç«¯å±‚
    A[å®¢æˆ·ç«¯<br/>IDE/AIåŠ©æ‰‹<br/>Claude/Cursorç­‰]
    
    %% MCPåè®®å±‚
    B[MCPä¼ è¾“å±‚<br/>Stdioç®¡é“<br/>JSON-RPC over stdio]
    
    %% æœåŠ¡å±‚
    subgraph C [LLMS.txtç”ŸæˆæœåŠ¡]
        C1[è¯·æ±‚è·¯ç”±å™¨<br/>MCP Router]
        C2[å·¥å…·ç®¡ç†å™¨<br/>Tool Manager]
        
        subgraph C3 [æ ¸å¿ƒä¸šåŠ¡æ¨¡å—]
            C31[é¡¹ç›®æ‰«æå™¨<br/>Project Scanner]
            C32[æ–‡ä»¶åˆ†æå™¨<br/>File Analyzer]
            C33[æ¨¡æ¿å¼•æ“<br/>Template Engine]
            C34[æ–‡æ¡£ç”Ÿæˆå™¨<br/>Document Generator]
        end
        
        subgraph C4 [æ•°æ®å­˜å‚¨]
            C41[é¡¹ç›®ç¼“å­˜<br/>Project Cache]
            C42[é…ç½®ç®¡ç†<br/>Config Manager]
        end
    end
    
    %% æ–‡ä»¶ç³»ç»Ÿå±‚
    D[æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ<br/>é¡¹ç›®ç›®å½•]
    
    %% è¿æ¥å…³ç³»
    A -->|å¯åŠ¨è¿›ç¨‹<br/>stdin/stdout| B
    B -->|JSON-RPCè°ƒç”¨| C1
    C1 -->|è·¯ç”±åˆ†å‘| C2
    C2 -->|è°ƒç”¨å·¥å…·| C3
    C3 -->|è¯»å–/åˆ†æ| D
    C3 -->|å†™å…¥æ–‡æ¡£| D
    C3 -->|ç¼“å­˜æ•°æ®| C41
    C31 -->|è¯»å–é…ç½®| C42
    
    %% æ ·å¼å®šä¹‰
    classDef client fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef transport fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef service fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef module fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef storage fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef filesystem fill:#e0f2f1,stroke:#004d40,stroke-width:2px
    
    class A client
    class B transport
    class C service
    class C3 module
    class C4 storage
    class D filesystem


â±ï¸ æ—¶åºå›¾ï¼šç”Ÿæˆllms.txtçš„å®Œæ•´æµç¨‹

sequenceDiagram
    participant C as å®¢æˆ·ç«¯<br/>(IDE/AIåŠ©æ‰‹)
    participant T as MCPä¼ è¾“å±‚<br/>(Stdio)
    participant R as è¯·æ±‚è·¯ç”±å™¨
    participant TM as å·¥å…·ç®¡ç†å™¨
    participant PS as é¡¹ç›®æ‰«æå™¨
    participant FA as æ–‡ä»¶åˆ†æå™¨
    participant DG as æ–‡æ¡£ç”Ÿæˆå™¨
    participant FS as æ–‡ä»¶ç³»ç»Ÿ

    Note over C,FS: åˆå§‹åŒ–é˜¶æ®µ
    C->>T: å¯åŠ¨MCPæœåŠ¡å™¨è¿›ç¨‹
    T->>R: å»ºç«‹stdioé€šä¿¡ç®¡é“
    R->>T: å‘é€åˆå§‹åŒ–å®Œæˆä¿¡å·
    T->>C: æœåŠ¡å™¨å°±ç»ª
    
    Note over C,FS: å·¥å…·è°ƒç”¨é˜¶æ®µ
    C->>T: å‘é€generate_llms_txtè¯·æ±‚<br/>(JSON-RPC over stdio)
    T->>R: è§£æå¹¶è½¬å‘è¯·æ±‚
    R->>TM: è·¯ç”±åˆ°å·¥å…·ç®¡ç†å™¨
    
    Note over TM,DG: é¡¹ç›®åˆ†æé˜¶æ®µ
    TM->>PS: è°ƒç”¨é¡¹ç›®æ‰«æå™¨
    PS->>FS: éå†é¡¹ç›®ç›®å½•ç»“æ„
    FS->>PS: è¿”å›æ–‡ä»¶åˆ—è¡¨
    PS->>FA: åˆ†æé¡¹ç›®ç±»å‹å’Œç»“æ„
    FA->>FS: è¯»å–å…³é”®æ–‡ä»¶(package.jsonç­‰)
    FS->>FA: è¿”å›æ–‡ä»¶å†…å®¹
    FA->>TM: è¿”å›é¡¹ç›®åˆ†æç»“æœ
    
    Note over TM,DG: æ–‡æ¡£ç”Ÿæˆé˜¶æ®µ
    TM->>DG: è°ƒç”¨æ–‡æ¡£ç”Ÿæˆå™¨
    DG->>DG: åº”ç”¨æ¨¡æ¿å¼•æ“ç”Ÿæˆå†…å®¹
    DG->>FS: å†™å…¥llms.txtæ–‡ä»¶
    FS->>DG: è¿”å›å†™å…¥ç»“æœ
    
    Note over DG,C: å“åº”è¿”å›é˜¶æ®µ
    DG->>TM: è¿”å›ç”Ÿæˆç»“æœ
    TM->>R: è¿”å›å·¥å…·æ‰§è¡Œç»“æœ
    R->>T: å°è£…ä¸ºJSON-RPCå“åº”
    T->>C: é€šè¿‡stdioè¿”å›ç»“æœ
    
    Note over C,FS: å®Œæ•´æµç¨‹ç»“æŸ


æ ¸å¿ƒç»„ä»¶è¯¦ç»†è¯´æ˜

1. MCPä¼ è¾“å±‚ (Stdio)

â€¢ èŒè´£: å¤„ç†è¿›ç¨‹é—´é€šä¿¡ï¼Œä½¿ç”¨JSON-RPC over stdio

â€¢ è¾“å…¥: ä»stdinè¯»å–å®¢æˆ·ç«¯è¯·æ±‚

â€¢ è¾“å‡º: å‘stdoutå†™å…¥æœåŠ¡å™¨å“åº”

â€¢ ç‰¹ç‚¹: æ— ç½‘ç»œå»¶è¿Ÿï¼Œè¿›ç¨‹éš”ç¦»å®‰å…¨

2. å·¥å…·ç®¡ç†å™¨ (Tool Manager)

# ä¼ªä»£ç ç¤ºä¾‹
class ToolManager:
    def handle_request(self, method: str, params: dict):
        if method == "generate_llms_txt":
            return self.generate_llms_txt(params)
        elif method == "get_project_info":
            return self.get_project_info(params)


3. é¡¹ç›®æ‰«æå™¨ (Project Scanner)

â€¢ é€’å½’éå†ç›®å½•æ ‘

â€¢ è¯†åˆ«é¡¹ç›®ç±»å‹(Python/Node.js/Goç­‰)

â€¢ æ’é™¤æ— å…³ç›®å½•(node_modules, .gitç­‰)

4. æ–‡æ¡£ç”Ÿæˆå™¨ (Document Generator)

â€¢ åŸºäºåˆ†æç»“æœå¡«å……æ¨¡æ¿

â€¢ å¤„ç†Markdownæ ¼å¼

â€¢ é”™è¯¯å¤„ç†å’Œå›æ»šæœºåˆ¶

ğŸ“Š æ•°æ®æµæ€»ç»“

1. è¯·æ±‚æµ: å®¢æˆ·ç«¯ â†’ stdio â†’ è·¯ç”±å™¨ â†’ å·¥å…· â†’ ä¸šåŠ¡æ¨¡å—
2. æ•°æ®æµ: æ–‡ä»¶ç³»ç»Ÿ â†’ åˆ†æå™¨ â†’ ç”Ÿæˆå™¨ â†’ æ–‡ä»¶ç³»ç»Ÿ  
3. å“åº”æµ: ä¸šåŠ¡æ¨¡å— â†’ å·¥å…· â†’ è·¯ç”±å™¨ â†’ stdio â†’ å®¢æˆ·ç«¯

è¿™ç§æ¶æ„ç¡®ä¿äº†èŒè´£åˆ†ç¦»ã€æ˜“äºæµ‹è¯•å’Œæ‰©å±•ï¼ŒåŒæ—¶é€šè¿‡stdioæœºåˆ¶æä¾›äº†é«˜æ•ˆçš„æœ¬åœ°é€šä¿¡ã€‚


ä½ æƒ³å¼€å‘ä¸€ä¸ªMCP Serveræ¥ç®¡ç†å’Œæ›´æ–°é¡¹ç›®çš„ llms.txt æ–‡æ¡£ï¼Œè¿™ä¸ªæƒ³æ³•å¾ˆæ£’ï¼Œå®ƒèƒ½å°†æœ¬åœ°é¡¹ç›®ä¿¡æ¯ä¸AIèƒ½åŠ›è¿æ¥èµ·æ¥ã€‚ä¸‹é¢æˆ‘ä¸ºä½ æ¢³ç†ä¸€ä¸‹å®ç°æ€è·¯ã€å…³é”®æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ã€‚

ğŸ› ï¸ é¡¹ç›®ä¿¡æ¯ç®¡ç†ä¸llms.txtç”ŸæˆMCPæœåŠ¡æ–¹æ¡ˆ

å®ç°ä¸€ä¸ªèƒ½å¤Ÿè·å–é¡¹ç›®ä¿¡æ¯å¹¶è‡ªåŠ¨ç”Ÿæˆ/æ›´æ–° llms.txt æ–‡ä»¶çš„MCP Serverï¼Œæ ¸å¿ƒæ˜¯ç»“åˆæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€é¡¹ç›®ä¿¡æ¯æå–ä»¥åŠMCPåè®®å°è£…ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»¼åˆçš„å®ç°æ–¹æ¡ˆã€‚

æ ¸å¿ƒåŠŸèƒ½è®¾è®¡

é¦–å…ˆï¼Œæˆ‘ä»¬æ˜ç¡®è¿™ä¸ªMCP Serveréœ€è¦å…·å¤‡çš„æ ¸å¿ƒèƒ½åŠ›ï¼š

1.  é¡¹ç›®ä¿¡æ¯è·å–ï¼šæ‰«æå½“å‰ç›®å½•ï¼Œè¯†åˆ«é¡¹ç›®ç»“æ„ã€æ–‡ä»¶ç±»å‹å’Œå…³é”®æ–‡ä»¶ã€‚
2.  llms.txtç”Ÿæˆä¸æ›´æ–°ï¼šæ ¹æ®æå–çš„é¡¹ç›®ä¿¡æ¯ï¼Œåˆ›å»ºæˆ–æ›´æ–°ç¬¦åˆè§„èŒƒçš„llms.txt Markdownæ–‡ä»¶ã€‚
3.  MCPå·¥å…·æš´éœ²ï¼šé€šè¿‡MCPåè®®æä¾›è¿™äº›åŠŸèƒ½ï¼Œä½¿å¾—AIåŠ©æ‰‹ï¼ˆå¦‚Cursorã€Claudeï¼‰èƒ½å¤Ÿè°ƒç”¨å®ƒä»¬ã€‚

æŠ€æœ¯æ ˆä¸ä¾èµ–

å®ç°è¯¥MCP Serverï¼Œä½ éœ€è¦ä»¥ä¸‹Pythonåº“ï¼š
pip install mcp fastapi uvicorn

mcp åº“æ˜¯æ ¸å¿ƒï¼Œç”¨äºæ„å»ºMCPæœåŠ¡å™¨ï¼›fastapi å’Œ uvicorn ç”¨äºåˆ›å»ºWebæœåŠ¡å™¨ï¼ˆå¦‚æœä½ é€‰æ‹©SSEä¼ è¾“æ–¹å¼ï¼‰ã€‚

å®ç°æ­¥éª¤ä¸ä»£ç ç¤ºä¾‹

1. åˆ›å»ºMCPæœåŠ¡å™¨æ¡†æ¶

é¦–å…ˆï¼Œæ­å»ºä¸€ä¸ªåŸºæœ¬çš„MCPæœåŠ¡å™¨ç»“æ„ã€‚
from mcp.server.fastmcp import FastMCP
import os
from pathlib import Path
from typing import List, Dict, Any

# åˆå§‹åŒ–MCPæœåŠ¡å™¨ï¼Œç»™å®ƒå–ä¸ªåå­—
mcp = FastMCP("llms.txt Manager")

@mcp.tool()
def get_project_info(directory: str = ".") -> Dict[str, Any]:
    """
    è·å–æŒ‡å®šç›®å½•ä¸‹çš„é¡¹ç›®ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç»“æ„ã€ç±»å‹å’Œå…³é”®æ–‡ä»¶ã€‚
    
    Args:
        directory: é¡¹ç›®ç›®å½•è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•.
    
    Returns:
        åŒ…å«é¡¹ç›®ä¿¡æ¯çš„å­—å…¸ï¼Œä¾‹å¦‚æ–‡ä»¶åˆ—è¡¨ã€é¡¹ç›®ç±»å‹ç­‰ã€‚
    """
    project_path = Path(directory).resolve()
    if not project_path.exists() or not project_path.is_dir():
        return {"error": f"ç›®å½•ä¸å­˜åœ¨æˆ–ä¸æ˜¯æœ‰æ•ˆç›®å½•: {directory}"}
    
    all_files = []
    total_size = 0
    file_types = set()
    
    # éå†é¡¹ç›®ç›®å½•ï¼Œæ”¶é›†ä¿¡æ¯
    for file_path in project_path.rglob('*'):
        if file_path.is_file():
            try:
                relative_path = str(file_path.relative_to(project_path))
                all_files.append({
                    "name": relative_path,
                    "size": file_path.stat().st_size,
                    "modified": file_path.stat().st_mtime
                })
                total_size += file_path.stat().st_size
                file_types.add(file_path.suffix.lower())
            except OSError:
                # è·³è¿‡æ— æƒé™è®¿é—®çš„æ–‡ä»¶
                pass
    
    # å°è¯•è¯†åˆ«é¡¹ç›®ç±»å‹ï¼ˆä¾‹å¦‚Pythonã€JavaScriptã€Goç­‰ï¼‰
    project_type = "unknown"
    if any(fname == 'package.json' for fname in [f['name'] for f in all_files]):
        project_type = "JavaScript/Node.js"
    elif any(fname == 'requirements.txt' or fname.endswith('.py') for fname in [f['name'] for f in all_files]):
        project_type = "Python"
    elif any(fname == 'go.mod' for fname in [f['name'] for f in all_files]):
        project_type = "Go"
    elif any(fname == 'Cargo.toml' for fname in [f['name'] for f in all_files]):
        project_type = "Rust"
    
    return {
        "directory": str(project_path),
        "total_files": len(all_files),
        "total_size": total_size,
        "file_types": list(file_types),
        "project_type": project_type,
        "files": all_files[:50]  # è¿”å›å‰50ä¸ªæ–‡ä»¶ï¼Œé¿å…æ•°æ®é‡è¿‡å¤§
    }


2. å®ç°llms.txtç”Ÿæˆä¸æ›´æ–°å·¥å…·

è¿™æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼Œæ ¹æ®é¡¹ç›®ä¿¡æ¯ç”Ÿæˆç»“æ„åŒ–çš„llms.txtæ–‡ä»¶ã€‚
@mcp.tool()
def generate_llms_txt(directory: str = ".", overview: str = None) -> Dict[str, str]:
    """
    ä¸ºæŒ‡å®šé¡¹ç›®ç”Ÿæˆæˆ–æ›´æ–°llms.txtæ–‡ä»¶ã€‚
    
    Args:
        directory: é¡¹ç›®ç›®å½•è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•.
        overview: é¡¹ç›®çš„ç®€çŸ­æ¦‚è¿°ï¼Œå¦‚æœæœªæä¾›åˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåŸºç¡€çš„.
    
    Returns:
        æ“ä½œç»“æœçš„çŠ¶æ€å’Œä¿¡æ¯.
    """
    project_path = Path(directory).resolve()
    llms_file_path = project_path / "llms.txt"
    
    # è·å–é¡¹ç›®ä¿¡æ¯
    project_info = get_project_info(directory)
    if "error" in project_info:
        return {"status": "error", "message": project_info["error"]}
    
    # å¦‚æœæ²¡æœ‰æä¾›æ¦‚è¿°ï¼Œåˆ™ç”Ÿæˆä¸€ä¸ªåŸºç¡€çš„
    if not overview:
        overview = f"{project_info['project_type']}é¡¹ç›®ä½äº {project_info['directory']}ï¼ŒåŒ…å« {project_info['total_files']} ä¸ªæ–‡ä»¶ã€‚"
    
    # æ„å»ºllms.txtçš„å†…å®¹
    llms_content = f"# {project_path.name}\n\n"
    llms_content += f"> {overview}\n\n"
    
    llms_content += "## æ ¸å¿ƒæ–‡ä»¶ä¸ç›®å½•\n\n"
    
    # æ·»åŠ å…³é”®æ–‡ä»¶ï¼Œä¼˜å…ˆè¯†åˆ«å¸¸è§çš„é‡è¦æ–‡ä»¶
    important_files = []
    for file_info in project_info["files"]:
        file_name = file_info["name"]
        if any(key_file in file_name for key_file in ['README', 'package.json', 'requirements.txt', 'main.py', 'app.py', 'index.js', 'src/', 'lib/']):
            important_files.append(file_info)
    
    for file_info in important_files[:10]:  # æœ€å¤šåˆ—å‡º10ä¸ªå…³é”®æ–‡ä»¶
        llms_content += f"- [{file_info['name']}]({file_info['name']}): æ–‡ä»¶å¤§å°: {file_info['size']} å­—èŠ‚\n"
    
    llms_content += "\n## é¡¹ç›®ç»“æ„\n\n"
    llms_content += f"- é¡¹ç›®ç±»å‹: {project_info['project_type']}\n"
    llms_content += f"- æ€»æ–‡ä»¶æ•°: {project_info['total_files']}\n"
    llms_content += f"- æ–‡ä»¶ç±»å‹: {', '.join(project_info['file_types'])}\n"
    
    llms_content += "\n## å¦‚ä½•ä½¿ç”¨\n\n"
    llms_content += "<!-- åœ¨æ­¤æ·»åŠ é¡¹ç›®çš„ç®€è¦ä½¿ç”¨è¯´æ˜æˆ–å‘½ä»¤ -->\n\n"
    
    llms_content += "## å¯é€‰ä¿¡æ¯\n\n"
    llms_content += "<!-- åœ¨æ­¤æ·»åŠ é™„åŠ èµ„æºã€APIå‚è€ƒæˆ–å…¶ä»–é“¾æ¥ -->\n"
    
    # å†™å…¥llms.txtæ–‡ä»¶
    try:
        with open(llms_file_path, 'w', encoding='utf-8') as f:
            f.write(llms_content)
        
        return {
            "status": "success",
            "message": f"llms.txt æ–‡ä»¶å·²æˆåŠŸç”Ÿæˆäº {llms_file_path}",
            "file_path": str(llms_file_path)
        }
    except Exception as e:
        return {"status": "error", "message": f"å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™: {str(e)}"}


3. æ·»åŠ æ›´å¤šå®ç”¨å·¥å…·

ä¸ºäº†è®©ä½ çš„MCP Serveræ›´å¼ºå¤§ï¼Œå¯ä»¥æ·»åŠ ä¸€äº›è¾…åŠ©å·¥å…·ã€‚
@mcp.tool()
def update_llms_overview(directory: str = ".", new_overview: str = None) -> Dict[str, str]:
    """
    æ›´æ–°ç°æœ‰llms.txtæ–‡ä»¶çš„æ¦‚è¿°éƒ¨åˆ†ã€‚
    
    Args:
        directory: é¡¹ç›®ç›®å½•è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•.
        new_overview: æ–°çš„é¡¹ç›®æ¦‚è¿°.
    
    Returns:
        æ“ä½œç»“æœçš„çŠ¶æ€å’Œä¿¡æ¯.
    """
    if not new_overview:
        return {"status": "error", "message": "å¿…é¡»æä¾›æ–°çš„æ¦‚è¿°å†…å®¹"}
    
    project_path = Path(directory).resolve()
    llms_file_path = project_path / "llms.txt"
    
    if not llms_file_path.exists():
        return {"status": "error", "message": "å½“å‰ç›®å½•ä¸‹ä¸å­˜åœ¨llms.txtæ–‡ä»¶"}
    
    try:
        with open(llms_file_path, 'r', encoding='utf-8') as f:
            content = f.read()
        
        # æ›¿æ¢æ¦‚è¿°éƒ¨åˆ†
        if "> " in content and "\n\n" in content:
            parts = content.split("> ", 1)
            if len(parts) > 1:
                remaining = parts[1].split("\n\n", 1)
                if len(remaining) > 1:
                    new_content = parts[0] + "> " + new_overview + "\n\n" + remaining[1]
                    
                    with open(llms_file_path, 'w', encoding='utf-8') as f:
                        f.write(new_content)
                    
                    return {"status": "success", "message": "llms.txt æ¦‚è¿°å·²æ›´æ–°"}
        
        return {"status": "error", "message": "æ— æ³•è§£æç°æœ‰çš„llms.txtæ–‡ä»¶æ ¼å¼"}
    except Exception as e:
        return {"status": "error", "message": f"æ›´æ–°æ–‡ä»¶æ—¶å‡ºé”™: {str(e)}"}

@mcp.tool()
def list_projects(parent_directory: str = ".") -> List[str]:
    """
    åˆ—å‡ºæŒ‡å®šçˆ¶ç›®å½•ä¸‹æ‰€æœ‰å¯èƒ½åŒ…å«é¡¹ç›®çš„å­ç›®å½•ã€‚
    
    Args:
        parent_directory: è¦æœç´¢çš„çˆ¶ç›®å½•è·¯å¾„.
    
    Returns:
        å¯èƒ½åŒ…å«é¡¹ç›®çš„ç›®å½•è·¯å¾„åˆ—è¡¨.
    """
    parent_path = Path(parent_directory).resolve()
    potential_projects = []
    
    for child in parent_path.iterdir():
        if child.is_dir():
            # æ£€æŸ¥ç›®å½•æ˜¯å¦åŒ…å«é¡¹ç›®ç‰¹å¾æ–‡ä»¶
            has_package_json = (child / 'package.json').exists()
            has_requirements = (child / 'requirements.txt').exists()
            has_gomod = (child / 'go.mod').exists()
            has_pyproject = (child / 'pyproject.toml').exists()
            
            if has_package_json or has_requirements or has_gomod or has_pyproject:
                potential_projects.append(str(child))
    
    return potential_projects


4. ä¸»ç¨‹åºå…¥å£

if __name__ == "__main__":
    # è¿è¡ŒMCPæœåŠ¡å™¨ï¼Œä½¿ç”¨stdioä¼ è¾“æ–¹å¼ï¼ˆé€‚åˆä¸IDE/ç¼–è¾‘å™¨é›†æˆï¼‰
    mcp.run(transport='stdio')


ğŸ“‹ é…ç½®ä¸ä½¿ç”¨

MCPæœåŠ¡å™¨é…ç½®

è¦è®©ä½ å–œæ¬¢çš„ä»£ç ç¼–è¾‘å™¨æˆ–AIåŠ©æ‰‹ï¼ˆå¦‚Cursorã€Claude Desktopï¼‰è¯†åˆ«å¹¶ä½¿ç”¨è¿™ä¸ªMCP Serverï¼Œé€šå¸¸éœ€è¦åœ¨ç¼–è¾‘å™¨çš„è®¾ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚

VSCode/Cursor é…ç½®ç¤ºä¾‹ (settings.json):
{
  "mcpServers": {
    "llms-txt-manager": {
      "command": "python",
      "args": [
        "/ç»å¯¹è·¯å¾„/åˆ°/ä½ çš„/llms_mcp_server.py"
      ],
      "env": {
        "PYTHONPATH": "/ä½ çš„/é¡¹ç›®/è·¯å¾„"
      }
    }
  }
}


é€šè¿‡AIåŠ©æ‰‹ä½¿ç”¨

é…ç½®æˆåŠŸåï¼Œä½ å°±å¯ä»¥åœ¨AIåŠ©æ‰‹ï¼ˆå¦‚Cursorï¼‰ä¸­ç›´æ¥ä½¿ç”¨å®šä¹‰çš„å·¥å…·äº†ï¼š

1.  æ‰“å¼€AIèŠå¤©ç•Œé¢ï¼ˆé€šå¸¸åœ¨Cursorä¸­æ˜¯ Cmd+L æˆ– Ctrl+Lï¼‰ã€‚
2.  è¾“å…¥ç±»ä¼¼æŒ‡ä»¤ï¼šâ€œè¯·å¸®æˆ‘ä¸ºå½“å‰é¡¹ç›®ç”Ÿæˆä¸€ä¸ªllms.txtæ–‡ä»¶â€æˆ–â€œè·å–è¿™ä¸ªé¡¹ç›®çš„ä¿¡æ¯â€ã€‚
3.  AIåŠ©æ‰‹ä¼šè°ƒç”¨ä½ å¼€å‘çš„MCP Serverå·¥å…·æ¥å®Œæˆè¯·æ±‚ã€‚

ğŸ’¡ æ‰©å±•å»ºè®®

ä½ çš„MCP Serverå¯ä»¥è¿›ä¸€æ­¥æ‰©å±•ï¼Œä½¿å…¶æ›´å¼ºå¤§ï¼š

â€¢   æ”¯æŒæ›´å¤šé¡¹ç›®ç±»å‹ï¼šå¢å¼ºé¡¹ç›®è¯†åˆ«é€»è¾‘ï¼Œæ”¯æŒJavaï¼ˆpom.xmlï¼‰ã€Rubyï¼ˆGemfileï¼‰ã€PHPï¼ˆcomposer.jsonï¼‰ç­‰ã€‚

â€¢   æ·±åº¦åˆ†æå…³é”®æ–‡ä»¶ï¼šè§£æREADME.mdã€package.jsonæˆ–requirements.txtç­‰æ–‡ä»¶ï¼Œæå–æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼ˆå¦‚é¡¹ç›®ä¾èµ–ã€è„šæœ¬å‘½ä»¤ç­‰ï¼‰å¹¶çº³å…¥llms.txtã€‚

â€¢   ç‰ˆæœ¬æ§åˆ¶é›†æˆï¼šæ£€æŸ¥é¡¹ç›®æ˜¯å¦ä¸ºGitä»“åº“ï¼Œå¦‚æœæ˜¯ï¼Œå¯ä»¥å°†å½“å‰åˆ†æ”¯ã€æœ€æ–°æäº¤ç­‰ä¿¡æ¯åŒ…å«åœ¨llms.txtä¸­ã€‚

â€¢   è‡ªå®šä¹‰æ¨¡æ¿ï¼šå…è®¸ç”¨æˆ·é€šè¿‡é…ç½®æ–‡ä»¶æˆ–å‚æ•°è‡ªå®šä¹‰llms.txtçš„Markdownæ¨¡æ¿ã€‚

â€¢   è‡ªåŠ¨åŒ–æ›´æ–°ï¼šç›‘å¬é¡¹ç›®æ–‡ä»¶å˜åŒ–ï¼Œåœ¨ç‰¹å®šäº‹ä»¶ï¼ˆå¦‚æ·»åŠ æ–°æ–‡ä»¶ã€æ›´æ–°READMEï¼‰æ—¶è‡ªåŠ¨æ›´æ–°llms.txtã€‚

âš ï¸ æ³¨æ„äº‹é¡¹

â€¢   æƒé™é—®é¢˜ï¼šç¡®ä¿MCP Serveræœ‰æƒé™è®¿é—®å’Œå†™å…¥ç›®æ ‡ç›®å½•ã€‚

â€¢   é”™è¯¯å¤„ç†ï¼šåœ¨å®é™…éƒ¨ç½²æ—¶ï¼Œåº”åŠ å¼ºé”™è¯¯å¤„ç†ï¼Œé¿å…å› ä¸ªåˆ«æ–‡ä»¶æ— æ³•è®¿é—®è€Œå¯¼è‡´æ•´ä¸ªå·¥å…·å¤±è´¥ã€‚

â€¢   æ€§èƒ½è€ƒè™‘ï¼šå¯¹äºéå¸¸å¤§çš„é¡¹ç›®ç›®å½•ï¼Œéå†æ‰€æœ‰æ–‡ä»¶å¯èƒ½è¾ƒæ…¢ï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ æ·±åº¦é™åˆ¶æˆ–æ’é™¤æŸäº›ç›®å½•ï¼ˆå¦‚node_modules, venvï¼‰ã€‚

â€¢   å®‰å…¨æ€§ï¼šå¦‚æœä½ çš„MCP Serverä¼šæš´éœ²ç»™ç½‘ç»œç¯å¢ƒï¼ˆä½¿ç”¨SSEä¼ è¾“æ—¶ï¼‰ï¼ŒåŠ¡å¿…è®¾ç½®é€‚å½“çš„æƒé™æ§åˆ¶å’Œè®¤è¯æœºåˆ¶ã€‚

è¿™ä¸ªMCP Serverå°†ä¸ºä½ çš„é¡¹ç›®æä¾›ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼ä¸AIåŠ©æ‰‹åˆ†äº«ä¸Šä¸‹æ–‡ï¼Œä»è€Œè·å¾—æ›´å‡†ç¡®ã€æ›´å…·ç›¸å…³æ€§çš„å¸®åŠ©ã€‚